---
export const partial = true;

import { deleteProject } from '@data/pocketbase';

const { project_id } = Astro.params;

if (!project_id) {
  return new Response(null, {
    status: 400,
    statusText: 'Bad Request',
  });
}

if (Astro.request.method === 'DELETE') {
  await deleteProject(project_id);

  return new Response(null, {
    status: 204,
    statusText: 'No Content',
    headers: {
      'HX-Redirect': '/app/dashboard',
    },
  });
}
---
